<div>
  <h1>Import</h1>
  <div class="py-2 px-2 py-lg-3 px-lg-5 card">
    <form #typeForm="ngForm">
      <div class="alert alert-danger alert-dismissible fade show" *ngIf="errorMessage" role="alert">
        <strong>Error:</strong> {{errorMessage}}
      </div>
      <div class="form-group">
        <label for="sourceSelect">Source</label>
        <select class="form-control custom-select" id="sourceSelect" name="sourceSelect" [(ngModel)]="selectedItem"
                (ngModelChange)="onSelect()">
          <option *ngFor="let option of compOptions" [ngValue]="option">{{option.name}}</option>
        </select>
      </div>
    </form>

    <div style="height: 4rem;" *ngIf="working"></div>
    <div class="loader mx-auto" *ngIf="working"></div>

    <div [ngSwitch]="selectedItem" [hidden]="working" #switch>
      <div *ngFor="let option of compOptions">
        <app-import-wrapper [type]="option.comp"
                             *ngSwitchCase="option"
                             (working)="onWorking($event)"
                             (complete)="onComplete($event)"
                             (error)="onError($event)"></app-import-wrapper>
      </div>
      <p *ngSwitchDefault>Select a source</p>
    </div>
  </div>
</div>
